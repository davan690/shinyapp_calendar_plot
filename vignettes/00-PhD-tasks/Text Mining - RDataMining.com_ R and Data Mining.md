Text Mining - RDataMining.com: R and Data Mining

|     |     |
| --- | --- |
| ## <a id="sites-chrome-userheader-logo"></a>[![RDataMining.com: R and Data Mining](../_resources/b5d0a937aa854afd8195d825092873b5.png)](http://www.rdatamining.com/)<a id="sites-chrome-userheader-title"></a>[RDataMining.com: R and Data Mining](http://www.rdatamining.com/) | Search this site |

*   [Home](http://www.rdatamining.com/home)
    
*   [News](http://www.rdatamining.com/news)
    
*   [Training](http://www.rdatamining.com/training)
    
    *   [R and Data Mining Course](http://www.rdatamining.com/training/course)
        
    *   [Past Trainings and Talks](http://www.rdatamining.com/training/past-trainings)
        
    *   [Tutorial at AusDM 2018](http://www.rdatamining.com/training/ausdm2018)
        
    *   [Tutorial at Melbourne Data Science Week](http://www.rdatamining.com/training/medascin)
        
    *   [Short Course at University of Canberra](http://www.rdatamining.com/training/uc)
        
    *   [Machine Learning 102 Workshop at SP Jain](http://www.rdatamining.com/training/ml102)
        
*   [Documents](http://www.rdatamining.com/docs)
    
    *   [Introduction to Data Mining with R](http://www.rdatamining.com/docs/introduction-to-data-mining-with-r)
        
    *   [R Reference Card for Data Mining](http://www.rdatamining.com/docs/r-reference-card-for-data-mining)
        
    *   [R and Data Mining: Examples and Case Studies](http://www.rdatamining.com/docs/r-and-data-mining-examples-and-case-studies)
        
    *   [Introduction to Data Mining with R and Data Import/Export in R](http://www.rdatamining.com/docs/introduction-to-data-mining-with-r-and-data-import-export-in-r)
        
    *   [Data Exploration and Visualization with R](http://www.rdatamining.com/docs/data-exploration-and-visualization-with-r)
        
    *   [Regression and Classification with R](http://www.rdatamining.com/docs/regression-and-classification-with-r)
        
    *   [Data Clustering with R](http://www.rdatamining.com/docs/data-clustering-with-r)
        
    *   [Association Rule Mining with R](http://www.rdatamining.com/docs/association-rule-mining-with-r)
        
    *   [Text Mining with R](http://www.rdatamining.com/docs/text-mining-with-r)
        
    *   [Twitter Data Analysis with R](http://www.rdatamining.com/docs/twitter-analysis-with-r)
        
    *   [Time Series Analysis and Mining with R](http://www.rdatamining.com/docs/time-series-analysis-and-mining-with-r)
        
*   [Examples](http://www.rdatamining.com/examples)
    
    *   [Data Exploration](http://www.rdatamining.com/examples/exploration)
        
    *   [Decision Trees](http://www.rdatamining.com/examples/decision-tree)
        
    *   [Random Forest](http://www.rdatamining.com/examples/random-forest)
        
    *   [k-means Clustering](http://www.rdatamining.com/examples/kmeans-clustering)
        
    *   [Hierarchical Clustering](http://www.rdatamining.com/examples/hierarchical-clustering)
        
    *   [Outlier Detection](http://www.rdatamining.com/examples/outlier-detection)
        
    *   [Time Series Forecasting](http://www.rdatamining.com/examples/time-series-forecasting)
        
    *   [Time Series Analysis](http://www.rdatamining.com/examples/time-series-analysis)
        
    *   [Time Series Clustering and Classification](http://www.rdatamining.com/examples/time-series-clustering-classification)
        
    *   [Association Rules](http://www.rdatamining.com/examples/association-rules)
        
    *   Text Mining
        
    *   [Twitter Follower Map](http://www.rdatamining.com/examples/twitter-follower-map)
        
    *   [Social Network Analysis](http://www.rdatamining.com/examples/social-network-analysis)
        
    *   [Multidimensional Scaling (MDS)](http://www.rdatamining.com/examples/multidimensional-scaling)
        
    *   [Principal Component Analysis (PCA)](http://www.rdatamining.com/examples/pca)
        
    *   [Parallel Computing](http://www.rdatamining.com/examples/parallel-computing)
        
    *   [Other Examples](http://www.rdatamining.com/examples/other)
        
*   [Big Data](http://www.rdatamining.com/big-data)
    
    *   [Big Data Platforms](http://www.rdatamining.com/big-data/big-data-platforms)
        
    *   [Big Data Resources](http://www.rdatamining.com/big-data/resources)
        
    *   [Step-by-Step Guide to Setting Up an R-Hadoop System](http://www.rdatamining.com/big-data/r-hadoop-setup-guide)
        
    *   [Building an R Hadoop System](http://www.rdatamining.com/big-data/rhadoop)
        
    *   [Hadoop: from Single-Node Mode to Cluster Mode](http://www.rdatamining.com/big-data/hadoop-cluster)
        
*   [Resources](http://www.rdatamining.com/resources)
    
    *   [Online Documents, Books and Tutorials](http://www.rdatamining.com/resources/onlinedocs)
        
    *   [Free Online Courses](http://www.rdatamining.com/resources/courses)
        
    *   [Data Mining Tutorials](http://www.rdatamining.com/resources/data-mining-tutorials)
        
    *   [Free Datasets](http://www.rdatamining.com/resources/data)
        
    *   [Free Data Mining Tools](http://www.rdatamining.com/resources/tools)
        
*   [Datasets](http://www.rdatamining.com/data)
    
*   [Books](http://www.rdatamining.com/books)
    
    *   [R and Data Mining: Examples and Case Studies](http://www.rdatamining.com/books/rdm)
        
    *   [Data Mining Applications with R](http://www.rdatamining.com/books/dmar)
        
    *   [Post-Mining of Association Rules](http://www.rdatamining.com/books/pmar)
        
*   [What is R](http://www.rdatamining.com/r)
    
*   [Donation & Supporters](http://www.rdatamining.com/donate)
    
*   [Sponsorship and Advertisement](http://www.rdatamining.com/advertise)
    
*   [Sponsors](http://www.rdatamining.com/sponsors)
    
*   [About RDataMining](http://www.rdatamining.com/about)
    

[Examples](http://www.rdatamining.com/examples)‎ \> ‎

### <a id="sites-page-title"></a>Text Mining

|     |     |
| --- | --- |
| This page shows an example on text mining of Twitter data with R packages _twitteR_, _tm_ and _wordcloud_. Package _twitteR_ provides access to Twitter data, _tm_ provides functions for text mining, and _wordcloud_ visualizes the result with a word cloud.  <br>  <br>If you have no access to Twitter, the tweets data can be downloaded as file "rdmTweets.RData" at [the Data page](http://www.rdatamining.com/data), and then you can skip the first step below.  <br><br>### <a id="TOC-Retrieving-Text-from-Twitter"></a>Retrieving Text from Twitter<br><br>Twitter API requires authentication since March 2013. Please follow instructions in "Section 3 - Authentication with OAuth" in [the twitteR vignettes on CRAN](http://cran.r-project.org/web/packages/twitteR/vignettes/twitteR.pdf) or [this link](http://geoffjentry.hexdump.org/twitteR.pdf) to complete authentication before running the code below.  <br>  <br><br>`> library(twitteR)`  <br>`> # retrieve the first 100 tweets (or all tweets if fewer than 100)`  <br>`> # from the user timeline of @rdatammining`  <br>`> rdmTweets <- userTimeline("rdatamining", n=100)`  <br>`> n <- length(rdmTweets)`  <br>`> rdmTweets[1:3]`  <br>`[[1]]`  <br>`Text Mining Tutorial http://t.co/jPHHLEGm`  <br>`[[2]]`  <br>`R cookbook with examples http://t.co/aVtIaSEg`  <br>`[[3]]`  <br>`Access large amounts of Twitter data for data mining and other tasks within`  <br>`R via the twitteR package. http://t.co/ApbAbnxs`<br><br>  <br><br>### <a id="TOC-Transforming-Text"></a>Transforming Text<br><br>The tweets are first converted to a data frame and then to a corpus.  <br>  <br><br>`> df <- do.call("rbind", lapply(rdmTweets, as.data.frame))`  <br>`> dim(df)`  <br>`[1] 79 10`  <br>  <br>`> library(tm)`  <br>`> # build a corpus, which is a collection of text documents`  <br>`> # VectorSource specifies that the source is character vectors.`  <br>`> myCorpus <- Corpus(VectorSource(df$text))`<br><br>  <br>After that, the corpus needs a couple of transformations, including changing letters to lower case, removing punctuations/numbers and removing stop words. The general English stop-word list is tailored by adding "available" and "via" and removing "r".  <br>  <br><br>`> myCorpus <- tm_map(myCorpus, tolower)`  <br>`> # remove punctuation`  <br>`> myCorpus <- tm_map(myCorpus, removePunctuation)`  <br>`> # remove numbers`  <br>`> myCorpus <- tm_map(myCorpus, removeNumbers)`  <br>`> # remove stopwords`<br><br>`> # keep "r" by removing it from stopwords`  <br>`> myStopwords <- c(stopwords('english'), "available", "via")`  <br>`> idx <- which(myStopwords == "r")`  <br>`> myStopwords <- myStopwords[-idx]`  <br>`> myCorpus <- tm_map(myCorpus, removeWords, myStopwords)`<br><br>  <br><br>### <a id="TOC-Stemming-Words"></a>Stemming Words<br><br>In many cases, words need to be stemmed to retrieve their radicals. For instance, "example" and "examples" are both stemmed to "exampl". However, after that, one may want to complete the stems to their original forms, so that the words would look "normal".  <br>  <br><br>`> dictCorpus <- myCorpus`  <br>`> # stem words in a text document with the snowball stemmers,`  <br>`> # which requires packages Snowball, RWeka, rJava, RWekajars`  <br>`> myCorpus <- tm_map(myCorpus, stemDocument)`  <br>`> # inspect the first three ``documents"`  <br>`> inspect(myCorpus[1:3])`  <br>`(Some details are removed to make it short. Same applies to inspect() below.)`  <br>`[[1]]`  <br>`text mine tutori` `httptcojphhlegm`  <br>`[[2]]`  <br>`r cookbook exampl httptcoavtiaseg`  <br>`[[3]]`  <br>`access amount twitter data data mine task r twitter packag httptcoapbabnx`  <br>  <br>`> # stem completion`  <br>`> myCorpus <- tm_map(myCorpus, stemCompletion, dictionary=dictCorpus)`<br><br>  <br>Print the first three documents in the built corpus.  <br>  <br><br>`> inspect(myCorpus[1:3])`  <br>`[[1]]`  <br>`text miners tutorial httptcojphhlegm`  <br>`[[2]]`  <br>`r cookbook examples httptcoavtiaseg`  <br>`[[3]]`  <br>`access amounts twitter data data miners task r twitter package httptcoapbabnxs`<br><br>  <br>Something unexpected in the above stemming and stem completion is that, word "mining" is first stemmed to "mine", and then is completed to "miners", instead of "mining", although there are many instances of "mining" in the tweets, compared to only one instance of "miners".  <br>  <br><br>### <a id="TOC-Building-a-Document-Term-Matrix"></a>Building a Document-Term Matrix<br><br>`> myDtm <- TermDocumentMatrix(myCorpus, control = list(minWordLength = 1))`  <br>`> inspect(myDtm[266:270,31:40])`  <br>`A term-document matrix (5 terms, 10 documents)`  <br>`Non-/sparse entries: 9/41`  <br>`Sparsity : 82%`  <br>`Maximal term length: 12`  <br>`Weighting : term frequency (tf)`  <br>`             Docs`  <br>`Terms        31 32 33 34 35 36 37 38 39 40`  <br>`r             0  0  1  1  1  0  1  2  1  0`  <br>`ramachandran  0  0  0  0  0  0  1  0  0  0`  <br>`ranked        0  0  0  1  0  0  0  0  0  0`  <br>`rapidminer    0  0  0  0  0  0  0  0  0  0`  <br>`rdatamining   0  0  1  0  0  0  0  0  0  0`<br><br>  <br>Based on the above matrix, many data mining tasks can be done, for example, clustering, classification and association analysis.  <br>  <br><br>### <a id="TOC-Frequent-Terms-and-Associations"></a>Frequent Terms and Associations<br><br>`> findFreqTerms(myDtm, lowfreq=10)`  <br>`[1] "analysis" "data" "examples" "miners" "package" "r" "slides"`  <br>`[8] "tutorial" "users"`  <br>  <br>`> # which words are associated with "r"?`  <br>`> findAssocs(myDtm, 'r', 0.30)`  <br>`   r  users examples package canberra cran list`  <br>`1.00   0.44     0.34    0.31     0.30 0.30 0.30`  <br>  <br>`> # which words are associated with "mining"?`  <br>`> # Here "miners" is used instead of "mining",`  <br>`> # because the latter is stemmed and then completed to "miners". :-(`  <br>`> findAssocs(myDtm, 'miners', 0.30)`  <br>`miners data classification httptcogbnpv mahout`  <br>`  1.00 0.56           0.47         0.47   0.47`  <br>`recommendation sets supports frequent itemset`  <br>`          0.47 0.47     0.47     0.40    0.39`<br><br>  <br><br>### <a id="TOC-Word-Cloud"></a>Word Cloud<br><br>After building a document-term matrix, we can show the importance of words with a word cloud (also kown as a tag cloud) . In the code below, word "miners" are changed back to "mining".  <br>  <br><br>`> library(wordcloud)`  <br>`> m <- as.matrix(myDtm)`  <br>`> # calculate the frequency of words`  <br>`> v <- sort(rowSums(m), decreasing=TRUE)`  <br>`> myNames <- names(v)`  <br>`> k <- which(names(v)=="miners")`  <br>`> myNames[k] <- "mining"`  <br>`> d <- data.frame(word=myNames, freq=v)`  <br>`> wordcloud(d$word, d$freq, min.freq=3)`<br><br>  <br>  <br><br>[![](../_resources/d8fa85c30e5b43f5b4f08baef43f2460.png "Word cloud of @RDataMining tweets")](http://www.rdatamining.com/examples/text-mining/wordcloud.png?attredirects=0)<br><br>  <br>The above word cloud clearly shows that "r", "data" and "mining" are the three most important words, which validates that the @RDataMining tweets present information on R and data mining. The other important words are "analysis", "examples", "slides", "tutorial" and "package", which shows that it focuses on documents and examples on analysis and R packages.  <br><br>  <br>More examples on text mining with R and other data mining techniques can be found in my book "[R and Data Mining: Examples and Case Studies](http://www.rdatamining.com/docs)", which is downloadable as a .PDF file at the link. |     |

©2011-2020 Yanchang Zhao.    Contact: yanchang(at)rdatamining.com

[Sign in](https://accounts.google.com/ServiceLogin?continue=http://sites.google.com/a/rdatamining.com/www/examples/text-mining&service=jotspot)|[Report Abuse](http://sites.google.com/a/rdatamining.com/www/system/app/pages/reportAbuse)|Powered By **[Google Sites](http://sites.google.com/site)**